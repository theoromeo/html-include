var htmlInclude={masterName:"include",reservedAttributes:["src","select","attribute","include","html-include","cache","cached","fragment"],init:async function(e="tag"){let t;if("attribute"==e)t=`[${this.masterName}]`;else{if("tag"!=e)return console.warn("A valid mode was not specified"),!1;t=this.masterName}let r=document.querySelectorAll(t);this.doIncludes(r)},doIncludes:function(e){if(e){for(let t=0;t<e.length;t++)this.doInclude(e[t]);return!0}return!1},doInclude:async function(e){let t=await this.translate(e);if(!t)return!1;let r=this.transform(t);return!!t&&(this.replace(e,r),!0)},replace:function(e,t){e.replaceWith(t)},transform:function(e){return document.createRange().createContextualFragment(e)},translate:async function(e){let t=this.getProps(e);if(!e.getAttribute("src"))return console.error("Include Element does not have a reference 'src' attribute"),!1;let r=e.getAttribute("src"),n=await this.getTemplate(r);return this.includeProps(n,t)},getTemplate:async function(e){return fetch(e).then((t=>t.ok?t.text():(console.error("src '"+e+"' could not be found"),!1))).then((e=>e))},includeProps:function(e,t){let r=e;for(let e in t)r=r.replace(`$${e}`,t[e]);return r},getProps:function(e){let t={};return Array.from(e.attributes).forEach((e=>{0==this.isReservedAttributes(e.name)&&(t[e.name]=e.value)})),t},isReservedAttributes(e){for(let t in this.reservedAttributes)if(this.reservedAttributes[t]==e)return!0;return!1}};htmlInclude.init("attribute");